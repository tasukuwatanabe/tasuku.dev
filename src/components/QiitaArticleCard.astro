---
interface Props {
	article: {
		title: string;
		link: string;
		pubDate: string;
		description: string;
		qiitaId: string;
		ogImage?: string | null;
	};
}

const { article } = Astro.props;

// Format the date
const formattedDate = new Date(article.pubDate).toLocaleDateString('ja-JP', {
	year: 'numeric',
	month: '2-digit',
	day: '2-digit'
});
---

<li class="w-full">
	<a href={article.link} target="_blank" rel="noopener noreferrer" class="flex items-stretch gap-4 p-4 no-underline transition-all duration-200 hover:bg-gray-50 rounded-lg h-32">
		{article.ogImage ? (
			<img 
				src={article.ogImage} 
				alt={article.title}
				class="w-40 h-25 object-cover rounded-lg flex-shrink-0"
				loading="lazy"
			/>
		) : (
			<div class="w-40 h-25 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex items-center justify-center flex-shrink-0">
				<span class="text-gray-500 text-sm">No Image</span>
			</div>
		)}
		<div class="flex-grow flex flex-col justify-center">
			<h4 class="title m-0 text-black leading-tight text-lg hover:text-accent mb-2">{article.title}</h4>
			<p class="text-sm text-gray-600 mb-2 line-clamp-2">{article.description}</p>
			<div class="flex items-center gap-4 text-xs text-gray-500">
				<span>{formattedDate}</span>
				<span>@{article.qiitaId}</span>
			</div>
		</div>
	</a>
</li>

<style>
	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
</style> 